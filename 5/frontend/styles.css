/* ========== LIGHT THEME PALETTE (business + tech) ========== */
:root{
  /* Surfaces */
  --bg: #f6f8fb;           /* page background */
  --panel: #ffffff;        /* cards / tiles */
  --panel-2: #f2f5fa;      /* table headers / secondary blocks */

  /* Text */
  --text: #1f2937;         /* primary text */
  --muted: #5b6b7a;        /* secondary text */

  /* Brand & states */
  --blue: #2563eb;         /* brand */
  --ok:   #16a34a;
  --warn: #f59e0b;
  --danger:#ef4444;

  /* Borders & effects */
  --border: #e5eaf1;
  --shadow-1: 0 2px 10px rgba(2, 6, 23, .06);
  --shadow-2: 0 8px 24px rgba(2, 6, 23, .08);
  --radius: 16px;          /* global rounding */
  --radius-lg: 20px;       /* hero rounding */
}

/* ========== GLOBAL ========== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: radial-gradient(1200px 800px at 10% -10%, #ffffff 0%, var(--bg) 55%) fixed;
  font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
  color:var(--text);
}

/* emergency flash stays subtle on light */
@keyframes flashRed {
  0%, 100% { box-shadow: inset 0 0 0 0 rgba(239,68,68,.12); }
  50%      { box-shadow: inset 0 0 0 9999px rgba(239,68,68,.10); }
}
body.emergency-active { animation: flashRed 0.9s infinite; }

/* ========== TOP BAR ========== */
.topbar{
  display:flex;justify-content:space-between;align-items:center;
  padding:14px 18px;
  background: #ffffff;
  border-bottom: 1px solid var(--border);
  position: sticky; top:0; z-index:100;
}
.brand{display:flex;align-items:center;gap:12px}
.brand-title{font-weight:700;letter-spacing:.2px;color:var(--text)}
.brand-emoji{font-size:20px;opacity:.9}
.brand-divider{opacity:.35;margin:0 4px}
.userbox{display:flex;align-items:center;gap:16px;color:var(--muted)}

/* ========== LAYOUT & PANELS ========== */
.layout{display:grid;grid-template-columns:210px 1fr;gap:16px;padding:16px}
.leftcol,.maincol{display:flex;flex-direction:column;gap:5px}

.statcard,
.ship-status,
.shipcard,
.logcard,
.modal-card,
.table-container,
.sensor,
.section-title.small,
.kpi {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-1);
}

.statcard{padding:16px}
.statcard.warn{border-color: rgba(245,158,11,.35)}
.statcard.danger{border-color: rgba(239,68,68,.35)}
.stat-title{color:var(--muted);font-size:12px;letter-spacing:.3px}
.stat-value{font-size:28px;font-weight:700;margin-top:6px;color:var(--text)}

.section-title{font-size:18px;font-weight:800;letter-spacing:.3px;margin:2px 0;color:var(--text)}
/* .section-title.small{font-size:14px;font-weight:700;color:var(--muted)} */

/* ========== BUTTONS & LINKS ========== */
.btn,.btn-danger,.btn-warn,.btn-confirm{
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px 14px;font-weight:700;
  cursor:pointer;transition:.18s ease;
  background:#f8fafc;color:#0f172a;
  box-shadow: 0 1px 2px rgba(2,6,23,.04);
}
.btn:hover{transform:translateY(-1px); box-shadow: var(--shadow-1)}
.btn:active{transform:translateY(0)}
.btn-danger{background:#fee2e2;color:#991b1b;border-color:#fecaca}
.btn-warn{background:#fff7ed;color:#9a3412;border-color:#fed7aa}
.btn-confirm{background:#ecfdf5;color:#065f46;border-color:#bbf7d0}
.link{color:var(--blue);text-decoration:none}
.link:hover{text-decoration:underline}
.btn-delete{
  background:#fff;border:1px solid var(--border);color:#9aa6b2;font-weight:700;cursor:pointer;
  padding:6px 10px;border-radius:10px;
}
.btn-delete:hover{background:#f3f6fb;color:#ef4444;border-color:#fecaca}

/* ========== SHIP CARDS GRID ========== */
.ships-row{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
.ship-status{padding:18px;text-align:center}
.ship-icon{font-size:40px;width:56px;height:56px;display:flex;align-items:center;justify-content:center;margin:0 auto}
.ship-icon img{width:100%;height:100%;object-fit:cover;border-radius:12px}
.ship-status-name{font-size:12px;font-weight:700;margin:6px 0 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:0 4px}
.badge{display:inline-block;padding:4px 10px;border-radius:999px;font-size:12px}
.badge.gray{background:#eef2f7;color:#475569}
.badge.ok{background:#ecfdf5;color:#059669}
.badge.warn{background:#fff7ed;color:#b45309}
.badge.danger{background:#fee2e2;color:#dc2626}

.shipcards-row{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
.shipcard{padding:14px;gap:10px;position:relative}
.shipcard .btn-delete{position:absolute;top:8px;right:8px;}
.shipmeta{font-size:12px;color:var(--muted);line-height:1.35}
.shipname{font-weight:800;color:var(--text)}
.enter{align-self:flex-end}

/* ========== MODALS ========== */
.modal{position:fixed;inset:0;background:rgba(15,23,42,.25);display:flex;align-items:center;justify-content:center;z-index:100;}
.hidden{display:none}
.modal-card{padding:20px;max-width:520px}
.modal-actions{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}
.modal-form{display:flex;flex-direction:column;gap:8px;}
.modal-form label{font-size:12px;color:var(--muted);margin-top:4px;}
.modal-form input, .input, textarea{
  background:#ffffff;border:1px solid var(--border);color:var(--text);
  padding:10px;border-radius:10px;
}
.modal-form input:focus, .input:focus, textarea:focus{
  outline: none; border-color: #c7d2fe; box-shadow: 0 0 0 4px rgba(37,99,235,.12);
}

/* ========== SHIP PAGE LEFT NAV ========== */
.tanknav{display:flex;flex-direction:column;gap:10px}
.tankbtn{
  display:flex; justify-content:space-between; align-items:center;
  background:#ffffff;border:1px solid var(--border);color:var(--text);
  border-radius:12px;padding:10px;cursor:pointer;text-align:left;width:100%;
}
.tankbtn:hover{border-color:#cbd5e1; box-shadow: var(--shadow-1)}
.tankbtn.active{border-color:#bfdbfe; background:#eff6ff}

/* ========== LOGS CARD ========== */
.logcard{padding:12px;margin-top:12px}
.plain{list-style:none;margin:8px 0 0;padding:0}
.logs{
  height:160px;overflow:auto;background:#fbfdff;border:1px solid var(--border);
  border-radius:10px;padding:8px;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px;color:#0f172a;
}

/* ========== KPI TILES ========== */
.kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.kpi{padding:14px}
.kpi-name{font-weight:700;color:var(--muted)}
.kpi-value{font-size:34px;font-weight:800;margin:6px 0;color:#0f172a}
.kpi.ok  .kpi-value{color:var(--ok)}
.kpi.warn .kpi-value{color:var(--warn)}
.kpi.danger .kpi-value{color:var(--danger)}
.spark{
  height:26px;background:linear-gradient(180deg,#ffffff,#f6f8fb);
  border-radius:8px;border:1px dashed #dbe3ee;opacity:.9
}

/* thresholds inline chips */
.kpi-thresholds{ margin-top:.5rem; font-size:12px; opacity:.9; color: var(--muted); }
.kpi-thresholds code{ padding:0 .25rem; background:#f3f6fb; border-radius:6px; }

/* ========== SENSORS GRID ========== */
.sensors-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.sensor{padding:12px}
.sensor-top{display:flex;justify-content:space-between;align-items:center;}
.sensor-id{font-weight:700}
.sensor-state.ok{color:var(--ok)} .sensor-state.warn{color:var(--warn)} .sensor-state.danger{color:var(--danger)}
.sensor-val{font-size:22px;font-weight:800;margin-top:6px;color:#0f172a}
.sensor-details{display:flex; gap:12px; font-size:11px; color: var(--muted); margin-top:6px}

/* ========== TABLES / INVENTORY / TIMELINE ========== */
.inventory-layout{padding:16px}
.table-container{overflow:hidden}
.data-table{width:100%;border-collapse:separate;border-spacing:0}
.data-table th, .data-table td {
  padding:12px 16px;text-align:left;border-bottom:1px solid var(--border); color: var(--text);
}
.data-table th{
  background:var(--panel-2);
  font-size:12px;color:#334155;
}
.data-table tbody tr{cursor:pointer;transition: background-color .15s}
.data-table tbody tr:hover{background:#f1f5ff}

/* wider modal when needed */
.modal-card.wide{max-width:800px}

/* info blocks */
.sensor-info-grid{
  display:grid;grid-template-columns:repeat(3,1fr);
  gap:12px;margin-bottom:20px;background:var(--panel-2);
  padding:12px;border-radius:12px; border:1px solid var(--border)
}

/* ========== TOASTS ========== */
#toastBox{ position: fixed; right: 16px; bottom: 16px; display:flex; flex-direction:column; gap:8px; z-index:1000; }
.toast{
  background:#ffffff; border:1px solid var(--border); color:#0f172a;
  padding:10px 12px; border-radius:12px; transform: translateY(10px); opacity:0;
  transition:.25s ease; box-shadow: var(--shadow-2);
}
.toast.show{ transform: translateY(0); opacity:1; }

/* ========== FILTER ROW & INPUTS ========== */
.filters-row{
  display:grid; grid-template-columns: repeat(6, minmax(0, 170px)); gap:10px; margin-bottom:12px;
}
.input{ background:#ffffff; border:1px solid var(--border); color:var(--text); padding:10px; border-radius:10px; }
.input::placeholder{ color:#9aa6b2; }
@media (max-width: 900px){ .filters-row{ grid-template-columns: 1fr 1fr; } }

/* ========== STATUS BUTTON GROUP (ships list) ========== */
.ship-actions{ display:flex; justify-content:flex-end; align-items:center; gap:8px; margin-top:12px; }
.status-button-group{ display:flex; gap:6px; margin-right:auto; }
.btn-status{
  background:#ffffff; border:1px solid var(--border); color:#0f172a;
  padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700; font-size:12px; transition: .15s;
}
.btn-status:hover{ background:#f3f6fb; }
.btn-status.active{ background:#ecfdf5; border-color:#bbf7d0; color:#065f46; }
.btn-status:disabled{ background:#f8fafc; border-color:#e5eaf1; color:#94a3b8; cursor:not-allowed; }

/* ========== ACKNOWLEDGED BOX LOOK (positive) ========== */
.statcard.danger.acknowledged{
  border-color: #86efac; background: #f0fdf4;
}
.statcard.danger.acknowledged .stat-value{ color: var(--ok); }

/* ===== THEME: DARK (toggle via body.theme-dark) ===== */
body.theme-dark{
  --bg:#0b1520;
  --panel:#111b27;
  --panel-2:#0f1a25;
  --text:#d9e2ec;
  --muted:#9fb3c8;
  --ok:#36c98e;
  --warn:#ffb020;
  --danger:#ff4d4f;
  --blue:#2f81f7;
  --border:#122235;
  --shadow-1: 0 2px 10px rgba(0,0,0,.35);
  --shadow-2: 0 10px 28px rgba(0,0,0,.45);
  --radius:16px;
  --radius-lg:20px;
}

/* Dark: adjust page bg & components subtly */
body.theme-dark{
  background: linear-gradient(180deg,#38393a,#09111a) fixed;
}
body.theme-dark .topbar{
  background:#0e1926;
  border-bottom:1px solid var(--border);
}
body.theme-dark .logs{
  background:#0c1723;
  color:#d9e2ec;
  border-color:var(--border);
}
body.theme-dark .btn{ background:#2c4964; color:#fff; border-color:#17314a; }
body.theme-dark .btn:hover{ box-shadow:none; }
body.theme-dark .btn-danger{ background:var(--danger); color:#fff; border-color:transparent; }
body.theme-dark .btn-warn{ background:var(--warn); color:#1b1b1b; border-color:transparent; }
body.theme-dark .btn-confirm{ background:var(--ok); color:#fff; border-color:transparent; }
body.theme-dark .input,
body.theme-dark .modal-form input,
body.theme-dark textarea{
  background:#0c1723; border:1px solid #17314a; color:#fff;
}
body.theme-dark .data-table tbody tr:hover{ background:#19324a; }


/* ---------- SIDEBAR LAYOUT ---------- */
.app {
  display: grid;
  grid-template-columns: 240px 1fr;
  min-height: 100dvh;
  background: var(--bg);
}

/* Left sidebar */
.sidebar {
  background: var(--panel);
  border-right: 1px solid var(--border);
  padding: 16px 12px;
  position: sticky; top: 0; height: 100dvh;
  box-shadow: var(--shadow-1);
}
.sidebar .brand {
  gap: 8px; margin-bottom: 12px;
}
.sidebar .brand-title { font-size: 16px; }
.sidebar .nav {
  display: flex; flex-direction: column; gap: 6px; margin-top: 8px;
}
.sidebar .nav a, .sidebar .nav button {
  display: flex; align-items: center; gap: 10px;
  text-decoration: none; color: var(--text);
  background: transparent;
  border: 1px solid var(--border);
  padding: 10px 12px; border-radius: 12px; cursor: pointer;
}
.sidebar .nav a:hover, .sidebar .nav button:hover {
  background: var(--panel-2);
  box-shadow: var(--shadow-1);
}
.sidebar .nav .active {
  border-color: #bfdbfe; background: #eff6ff;
}

/* main content wrapper (your current pages go inside this) */
.main {
  min-width: 0; /* fix overflow with grids */
}

/* Make existing topbar optional (keep it if you like) */
.topbar {
  border-radius: 0;
}

/* ---------- “ADD SHIP” DASHED TILE (light + dark aware) ---------- */
.ship-status-add {
  background: transparent;
  border: 2px dashed var(--border);
  border-radius: var(--radius);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: .2s all; min-height: 120px;
}
.ship-status-add:hover {
  border-color: var(--blue);
  background: color-mix(in srgb, var(--blue) 8%, transparent);
}
.add-icon { font-size: 48px; color: #94a3b8; font-weight: 300; }
.ship-status-add:hover .add-icon { color: var(--blue); }

/* ---------- THEME: ensure components use CSS vars (dark toggle safe) ---------- */
/* Buttons that had hard whites—align them to vars so theme flips work */
.btn, .btn-danger, .btn-warn, .btn-confirm {
  background: var(--panel-2);
  color: var(--text);
  border-color: var(--border);
}
.btn-danger { background: color-mix(in srgb, var(--danger) 12%, var(--panel)); color: #7f1d1d; }
.btn-warn   { background: color-mix(in srgb, var(--warn) 10%, var(--panel));   color: #7c2d12; }
.btn-confirm{ background: color-mix(in srgb, var(--ok)  10%, var(--panel));   color: #064e3b; }

/* Inputs */
.input, .modal-form input, textarea {
  background: var(--panel);
  border: 1px solid var(--border);
  color: var(--text);
}

/* Tables hover (use panel-2 so dark mode respects) */
.data-table tbody tr:hover { background: var(--panel-2); }

/* Toasts */
.toast { background: var(--panel); color: var(--text); border-color: var(--border); }

/* Logs area */
.logs { background: var(--panel-2); color: var(--text); border-color: var(--border); }

/* KPI sparkline background */
.spark { background: linear-gradient(180deg, var(--panel), var(--panel-2)); border-color: var(--border); }

.hidden { display: none !important; }
.btn.small { padding: 6px 10px; font-size: 12px; }
/* ===== BIG RED ACK BUTTON ===== */
.btn-ack{
  align-items:center;
  font-size: 18px;
  padding: 14px 20px;
  border-radius: 14px;
  letter-spacing: .2px;
  box-shadow: var(--shadow-2);
}
.btn-ack:hover{ transform: translateY(-1px); }
.btn-ack:active{ transform: translateY(0); }

/* ===== SENSOR TILE: header actions (delete) ===== */
.sensor{
  position: relative;
  overflow: hidden;
}
.sensor-remove{
  position: absolute;
  top: 8px; right: 8px;
  width: 28px; height: 28px;
  display:flex; align-items:center; justify-content:center;
  border-radius: 8px;
  background: var(--panel-2);
  border: 1px solid var(--border);
  color: #9aa6b2;
  cursor: pointer;
  font-weight: 800;
}
.sensor-remove:hover{
  background:#ffe8e8; color:#b91c1c; border-color:#fecaca;
}

/* ===== SENSOR META ROW (battery + signal) ===== */
.sensor-meta{
  display:flex; align-items:center; justify-content:space-between;
  margin-top:8px; font-size:12px; color:var(--muted);
}

/* Battery pill (readable on light/dark) */
.battery{
  display:inline-flex; align-items:center; gap:6px;
  padding:4px 8px; border-radius:999px;
  background: var(--panel-2);
  border: 1px solid var(--border);
}
.bat-icon{
  position: relative; display:inline-block;
  width: 20px; height: 10px; border:1px solid #9aa6b2; border-radius:2px;
}
.bat-icon::after{ /* cap */
  content:""; position:absolute; right:-3px; top:2px; width:2px; height:6px;
  background:#9aa6b2; border-radius:1px;
}
.bat-fill{
  --level: 0.5; /* default 50% */
  position:absolute; left:0; top:0; bottom:0;
  width: calc(var(--level) * 100%);
  background: linear-gradient(90deg, #22c55e, #16a34a);
}

/* Network signal (bars) driven by --signal (0..1) */
.signal{
  display:inline-flex; align-items:end; gap:2px;
}
.sig-bar{
  width:3px; background:#cbd5e1; border-radius:2px;
  height: 6px; opacity:.6;
}
.signal[data-strength="1"] .sig-bar:nth-child(-n+1),
.signal[data-strength="2"] .sig-bar:nth-child(-n+2),
.signal[data-strength="3"] .sig-bar:nth-child(-n+3),
.signal[data-strength="4"] .sig-bar:nth-child(-n+4),
.signal[data-strength="5"] .sig-bar:nth-child(-n+5){
  background:#10b981; opacity:1;
}
.sig-bar:nth-child(1){ height:6px }
.sig-bar:nth-child(2){ height:8px }
.sig-bar:nth-child(3){ height:10px }
.sig-bar:nth-child(4){ height:12px }
.sig-bar:nth-child(5){ height:14px }

/* ===== Permit Summary (table card) ===== */
.permit-card{
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-1);
  padding: 12px;
}

.permit-table-wrap{
  overflow: auto;                /* scroll if too many columns */
  border-radius: calc(var(--radius) - 4px);
  border: 1px solid var(--border);
}

.permit-table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 14px;
}

.permit-table thead th{
  position: sticky; top: 0;
  background: var(--panel-2);
  color: #334155;
  text-align: left;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  font-weight: 700;
}

.permit-table tbody td{
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  color: var(--text);
  white-space: nowrap;
}

.permit-table tbody tr:nth-child(odd){
  background: color-mix(in srgb, var(--panel-2) 45%, transparent);
}

.permit-table tbody tr:hover{
  background: color-mix(in srgb, var(--blue) 8%, transparent);
}

/* rounded corners on the outer table */
.permit-table thead tr:first-child th:first-child { border-top-left-radius: calc(var(--radius) - 6px); }
.permit-table thead tr:first-child th:last-child  { border-top-right-radius: calc(var(--radius) - 6px); }
.permit-table tbody tr:last-child td:first-child  { border-bottom-left-radius: calc(var(--radius) - 6px); }
.permit-table tbody tr:last-child td:last-child   { border-bottom-right-radius: calc(var(--radius) - 6px); }

/* status chips */
.permit-status{
  display: inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
}
.permit-status.open    { background:#ecfdf5; color:#065f46; border:1px solid #bbf7d0; }
.permit-status.pending { background:#fff7ed; color:#9a3412; border:1px solid #fed7aa; }
.permit-status.closed  { background:#eef2f7; color:#475569; border:1px solid #e5eaf1; }

/* compact on small screens */
@media (max-width: 720px){
  .permit-table { font-size: 13px; }
  .permit-table thead th, .permit-table tbody td { padding: 8px 10px; }
}

/* ===== Overview: Work Summary (table card) ===== */
.summary-card{
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-1);
  padding: 12px;
  margin-top: 16px;
}

.summary-table-wrap{
  overflow: auto;
  border-radius: calc(var(--radius) - 4px);
  border: 1px solid var(--border);
}

.summary-table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 14px;
}

.summary-table thead th{
  position: sticky; top: 0;
  background: var(--panel-2);
  color: var(--text);
  text-align: left;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  font-weight: 700;
}

.summary-table tbody td{
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  color: var(--text);
  white-space: nowrap;
}

.summary-table tbody tr:nth-child(odd){
  background: color-mix(in srgb, var(--panel-2) 45%, transparent);
}

.summary-table tbody tr.exceed td{
  background: color-mix(in srgb, #ef4444 10%, transparent);
}

.summary-table tbody tr:hover{
  background: color-mix(in srgb, var(--blue) 8%, transparent);
}

/* rounded corners for outer edges */
.summary-table thead tr:first-child th:first-child { border-top-left-radius: calc(var(--radius) - 6px); }
.summary-table thead tr:first-child th:last-child  { border-top-right-radius: calc(var(--radius) - 6px); }
.summary-table tbody tr:last-child td:first-child  { border-bottom-left-radius: calc(var(--radius) - 6px); }
.summary-table tbody tr:last-child td:last-child   { border-bottom-right-radius: calc(var(--radius) - 6px); }

.summary-note{ font-size: 12px; margin-top: 8px; }


